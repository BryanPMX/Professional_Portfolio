---
export interface Props {
  title: string;
  description: string;
  image: string;
  technologies: string[];
  githubUrl?: string;
  liveUrl?: string;
  gameUrl?: string;
  type?: 'project' | 'game';
}

const { 
  title, 
  description, 
  image, 
  technologies, 
  githubUrl, 
  liveUrl, 
  gameUrl, 
  type = 'project' 
} = Astro.props;
---

<div class="panel gradient-border overflow-hidden group flex flex-col h-full">
  <!-- Project Image -->
  <div class="relative overflow-hidden h-48 rounded-2xl">
    <img
      src={image}
      alt={title}
      class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
    />
    <div class="absolute inset-0 bg-gradient-to-t from-dark-bg via-dark-bg/10 to-transparent opacity-60"></div>
    <div class="absolute left-4 top-4 inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.16em] text-white">
      {type === 'project' ? 'Case Study' : 'Playable'}
    </div>
  </div>

  <!-- Content -->
  <div class="p-6 flex flex-col flex-1 gap-4">
    <div class="flex items-start justify-between gap-3">
      <h3 class="text-xl font-semibold leading-tight text-dark-text group-hover:text-white transition-colors">{title}</h3>
      <span class="rounded-full bg-white/5 px-3 py-1 text-[11px] font-semibold tracking-[0.16em] text-dark-text-secondary">v2</span>
    </div>

    <p class="text-sm text-dark-text-secondary leading-relaxed flex-1">
      {description}
    </p>

    <!-- Technologies -->
    <div class="flex flex-wrap gap-2">
      {technologies.map((tech) => (
        <span class="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[11px] font-semibold text-dark-text-secondary">
          {tech}
        </span>
      ))}
    </div>

    <!-- Action Buttons -->
    <div class={`flex gap-3 flex-shrink-0 pt-2 ${(!githubUrl || !(liveUrl || gameUrl)) ? 'justify-start' : ''}`}>
      {type === 'project' && (
        <>
          {githubUrl && (
            <a
              href={githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              class:list={[
                'cta-ghost flex-1 text-center',
                liveUrl ? 'flex-1' : 'w-full'
              ]}
            >
              View Code
            </a>
          )}
          {liveUrl && (
            <button
              class:list={[
                'cta-solid flex-1 live-demo-btn',
                githubUrl ? 'flex-1' : 'w-full'
              ]}
              data-url={liveUrl}
              data-title={title}
            >
              Live Demo
            </button>
          )}
        </>
      )}
      
      {type === 'game' && (
        <>
          {githubUrl && (
            <a 
              href={githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="cta-ghost"
            >
              View Code
            </a>
          )}
          {gameUrl && (
            <a 
              href={gameUrl}
              class="flex-1 cta-solid text-center"
            >
              Play Game
            </a>
          )}
        </>
      )}
    </div>
  </div>
</div>
