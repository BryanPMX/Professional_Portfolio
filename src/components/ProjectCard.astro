---
export interface Props {
  title: string;
  description: string;
  image: string;
  technologies: string[];
  githubUrl?: string;
  liveUrl?: string;
  gameUrl?: string;
  type?: 'project' | 'game';
}

const {
  title,
  description,
  image,
  technologies,
  githubUrl,
  liveUrl,
  gameUrl,
  type = 'project'
} = Astro.props;
---

<div class="panel gradient-border interactive-card overflow-hidden group flex flex-col h-full reveal-on-scroll">
  <div class="relative overflow-hidden rounded-2xl aspect-[16/10]">
    <img src={image} alt={title} class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" />
    <div class="absolute inset-0 bg-gradient-to-t from-dark-bg via-dark-bg/10 to-transparent opacity-60"></div>
    <div class="absolute left-4 top-4 badge-glass uppercase tracking-[0.16em] text-white">
      {type === 'project' ? 'Case Study' : 'Playable'}
    </div>
  </div>

  <div class="p-6 flex flex-col flex-1 gap-4">
    <h3 class="text-xl font-semibold leading-tight text-dark-text group-hover:text-white transition-colors">{title}</h3>

    <p class="text-sm text-dark-text-secondary leading-relaxed flex-1">
      {description}
    </p>

    <div class="flex flex-wrap gap-2">
      {technologies.map((tech) => (
        <span class="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[11px] font-semibold text-dark-text-secondary">
          {tech}
        </span>
      ))}
    </div>

    <div class={`flex gap-3 flex-shrink-0 pt-2 ${(!githubUrl || !(liveUrl || gameUrl)) ? 'justify-start' : ''}`}>
      {type === 'project' && (
        <>
          {githubUrl && (
            <a
              href={githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              class:list={['cta-ghost flex-1 text-center', liveUrl ? 'flex-1' : 'w-full']}
            >
              Code
            </a>
          )}
          {liveUrl && (
            <button
              class:list={['cta-solid flex-1 live-demo-btn', githubUrl ? 'flex-1' : 'w-full']}
              data-url={liveUrl}
              data-title={title}
            >
              Demo
            </button>
          )}
        </>
      )}

      {type === 'game' && (
        <>
          {githubUrl && (
            <a href={githubUrl} target="_blank" rel="noopener noreferrer" class="cta-ghost">
              Code
            </a>
          )}
          {gameUrl && (
            <a href={gameUrl} class="flex-1 cta-solid text-center">
              Play
            </a>
          )}
        </>
      )}
    </div>
  </div>
</div>
