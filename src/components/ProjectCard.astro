---
export interface Props {
  title: string;
  description: string;
  image: string;
  technologies: string[];
  githubUrl?: string;
  liveUrl?: string;
  gameUrl?: string;
  type?: 'project' | 'game';
}

const { 
  title, 
  description, 
  image, 
  technologies, 
  githubUrl, 
  liveUrl, 
  gameUrl, 
  type = 'project' 
} = Astro.props;
---

<div class="bg-dark-card rounded-xl border border-dark-surface hover:border-accent/50 transition-all duration-300 hover:scale-105 overflow-hidden group">
  <!-- Project Image -->
  <div class="relative overflow-hidden aspect-square">
    <img
      src={image}
      alt={title}
      class="w-full h-full object-contain group-hover:scale-105 transition-transform duration-300"
    />
    <div class="absolute inset-0 bg-gradient-to-t from-dark-card/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
  </div>
  
  <!-- Content -->
  <div class="p-6">
    <h3 class="text-xl font-semibold mb-2 text-dark-text group-hover:text-accent transition-colors">
      {title}
    </h3>
    
    <p class="text-dark-text-secondary mb-4 line-clamp-3">
      {description}
    </p>
    
    <!-- Technologies -->
    <div class="flex flex-wrap gap-2 mb-6">
      {technologies.map((tech) => (
        <span class="px-3 py-1 bg-dark-bg rounded-full text-sm text-dark-text-secondary border border-dark-surface">
          {tech}
        </span>
      ))}
    </div>
    
    <!-- Action Buttons -->
    <div class="flex gap-3">
      {type === 'project' && (
        <>
          {githubUrl && (
            <a 
              href={githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="flex-1 bg-dark-surface hover:bg-dark-bg text-dark-text px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center border border-dark-surface hover:border-accent"
            >
              View Code
            </a>
          )}
          {liveUrl && (
            <button 
              class="flex-1 bg-accent hover:bg-accent-hover text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 live-demo-btn"
              data-url={liveUrl}
              data-title={title}
            >
              Live Demo
            </button>
          )}
        </>
      )}
      
      {type === 'game' && (
        <>
          {githubUrl && (
            <a 
              href={githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="bg-dark-surface hover:bg-dark-bg text-dark-text px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 border border-dark-surface hover:border-accent"
            >
              View Code
            </a>
          )}
          {gameUrl && (
            <a 
              href={gameUrl}
              class="flex-1 bg-accent-purple hover:bg-accent-purple-hover text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 text-center"
            >
              Play Game
            </a>
          )}
        </>
      )}
    </div>
  </div>
</div>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
